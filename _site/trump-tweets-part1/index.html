<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.7.1 by Michael Rose
  Copyright 2017 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE.txt
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin SEO -->









<title>  Paul Reidy</title>




<meta name="description" content="Description of test post">




<meta name="author" content="Paul Reidy">

<meta property="og:locale" content="en">
<meta property="og:site_name" content="Paul Reidy">
<meta property="og:title" content="Paul Reidy">


  <link rel="canonical" href="http://localhost:4000/trump-tweets-part1/">
  <meta property="og:url" content="http://localhost:4000/trump-tweets-part1/">



  <meta property="og:description" content="Description of test post">

















  

  





  <meta property="og:type" content="article">
  <meta property="article:published_time" content="2017-12-05T22:54:21+00:00">








  <script type="application/ld+json">
    {
      "@context" : "http://schema.org",
      "@type" : "Person",
      "name" : "Paul Reidy",
      "url" : "http://localhost:4000",
      "sameAs" : null
    }
  </script>







<!-- end SEO -->


<link href="http://localhost:4000/feed.xml" type="application/atom+xml" rel="alternate" title="Paul Reidy Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="http://localhost:4000/assets/css/main.css">

<!--[if lte IE 9]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->


    <!-- start custom head snippets -->

<!-- insert favicons. use http://realfavicongenerator.net/ -->

<!-- end custom head snippets -->
  </head>

  <body class="layout--post">

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    <div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        <a class="site-title" href="http://localhost:4000/">Paul Reidy</a>
        <ul class="visible-links">
          
            
            <li class="masthead__menu-item"><a href="https://reidy-p.github.io/">Home</a></li>
          
            
            <li class="masthead__menu-item"><a href="http://localhost:4000/posts/">Posts</a></li>
          
            
            <li class="masthead__menu-item"><a href="http://localhost:4000/software/">Software</a></li>
          
        </ul>
        <button type="button">
          <span class="visually-hidden">Toggle Menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>

    <!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->

<body class="post">
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-110480715-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-110480715-1');
</script>

<div id="main" role="main">
  <article class="post">
    <h2><strong></strong></h2>
    <p><font size="3"><i><time datetime="2017-12-05T22:54:21+00:00">December 05, 2017</time> </i></font></p>
    <hr/>
           
    <p>There have been several claims that many of Donald Trump’s Twitter followers are fake. For example, the <a href="https://www.twitteraudit.com/realdonaldtrump" style="color: rgb(0,0,0)">twitteraudit</a> service calculates that 20.8 million of Trump’s 43.8 million followers are fake. Given that Twitter’s API is quite friendly to use, I thought it would be fun to try to collect some data from Twitter and use some simple machine learning techniques to see if we can come up with our own estimate of how many fake followers Trump has.</p>

<p>In this first post I will collect the data from Twitter using it’s API. The next post will apply the machine learning models.</p>

<p>I will use the <a href="https://www.tweepy.org" style="color: rgb(0,0,0)">tweepy</a> module to connect to the Twitter API. The first thing we need to do is to <a href="https://apps.twitter.com/" style="color: rgb(0,0,0)">register</a> an app with Twitter to be able to connect to the Twitter API. When you do this you should be able to access your consumer and secret keys which you should keep private. The code below then allows you to gain authorized  access to Twitter’s API. I have replaced my access codes with empty strings and you should insert your codes in here.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># import some modules that we will use</span>
<span class="kn">import</span> <span class="nn">datetime</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">from</span> <span class="nn">tweepy</span> <span class="kn">import</span> <span class="n">OAuthHandler</span>
<span class="kn">from</span> <span class="nn">tweepy</span> <span class="kn">import</span> <span class="n">API</span>
<span class="kn">from</span> <span class="nn">tweepy</span> <span class="kn">import</span> <span class="n">Cursor</span>
<span class="kn">from</span> <span class="nn">tweepy</span> <span class="kn">import</span> <span class="n">RateLimitError</span>
<span class="kn">import</span> <span class="nn">csv</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="n">pd</span>
<span class="kn">import</span> <span class="nn">os.path</span>

<span class="c"># put your information into these empty strings</span>
<span class="n">consumer_key</span> <span class="o">=</span> <span class="s">''</span>
<span class="n">consumer_secret</span> <span class="o">=</span> <span class="s">''</span> 
<span class="n">access_token</span> <span class="o">=</span> <span class="s">''</span>
<span class="n">access_token_secret</span> <span class="o">=</span> <span class="s">''</span>

<span class="c"># gain authorized access to the Twitter API</span>
<span class="n">auth</span> <span class="o">=</span> <span class="n">OAuthHandler</span><span class="p">(</span><span class="n">consumer_key</span><span class="p">,</span> <span class="n">consumer_secret</span><span class="p">)</span>
<span class="n">auth</span><span class="o">.</span><span class="n">set_access_token</span><span class="p">(</span><span class="n">access_token</span><span class="p">,</span> <span class="n">access_token_secret</span><span class="p">)</span>
<span class="n">myAPI</span> <span class="o">=</span> <span class="n">API</span><span class="p">(</span><span class="n">auth</span><span class="p">)</span>

<span class="c"># get the account ID for Donald Trump's Twitter account</span>
<span class="n">trump_account_id</span> <span class="o">=</span> <span class="n">myAPI</span><span class="o">.</span><span class="n">get_user</span><span class="p">(</span><span class="s">'realDonaldTrump'</span><span class="p">)</span><span class="o">.</span><span class="nb">id</span>
</code></pre></div></div>

<p>The next thing we need is a list of Trump’s followers. To keep the analysis quick and simple for now I won’t try to collect a list of all of Trump’s followers but I will instead take a sample and see what we can extrapolate from this. The code below defines a function <code class="highlighter-rouge">get_followers</code> which takes the user ID of any (public) Twitter account, collects certain information about <code class="highlighter-rouge">num_followers</code> from that account, and stores this information in a csv file:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">get_followers</span><span class="p">(</span><span class="n">user_id</span><span class="p">,</span> <span class="n">num_followers</span><span class="p">,</span> <span class="n">output_file</span><span class="o">=</span><span class="s">'followers.csv'</span><span class="p">):</span>
    <span class="s">"""Takes a user id from a Twitter account and puts information on 
    num_follower followers into a csv file."""</span>
    
    <span class="c"># Create csv file if it doesn't exist</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">output_file</span><span class="p">):</span>    
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">output_file</span><span class="p">,</span> <span class="s">'w'</span><span class="p">,</span> <span class="n">newline</span><span class="o">=</span><span class="s">''</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">writer</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">writer</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="s">','</span><span class="p">)</span>
            <span class="c"># Headings for the csv file</span>
            <span class="n">writer</span><span class="o">.</span><span class="n">writerow</span><span class="p">([</span><span class="s">'name'</span><span class="p">,</span> <span class="s">'id'</span><span class="p">,</span> <span class="s">'created_at'</span><span class="p">,</span> <span class="s">'default_profile'</span><span class="p">,</span>
                            <span class="s">'default_profile_image'</span><span class="p">,</span> <span class="s">'description'</span><span class="p">,</span> 
                            <span class="s">'favourites_count'</span><span class="p">,</span> <span class="s">'followers_count'</span><span class="p">,</span> 
                            <span class="s">'friends_count'</span><span class="p">,</span> <span class="s">'geo_enabled'</span><span class="p">,</span> <span class="s">'lang'</span><span class="p">,</span> <span class="s">'location'</span><span class="p">,</span> 
                            <span class="s">'protected'</span><span class="p">,</span> <span class="s">'screen_name'</span><span class="p">,</span> <span class="s">'statuses_count'</span><span class="p">,</span> 
                            <span class="s">'time_zone'</span><span class="p">,</span> <span class="s">'verified'</span><span class="p">])</span>
    
    <span class="c"># Iterate through the number of followers specified and write follower </span>
    <span class="c"># information into the csv file</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">output_file</span><span class="p">,</span> <span class="s">'a'</span><span class="p">,</span> <span class="n">newline</span><span class="o">=</span><span class="s">''</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">writer</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">writer</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="s">','</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">follower</span> <span class="ow">in</span> <span class="n">Cursor</span><span class="p">(</span><span class="n">myAPI</span><span class="o">.</span><span class="n">followers</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="n">user_id</span><span class="p">)</span><span class="o">.</span><span class="n">items</span><span class="p">(</span><span class="n">num_followers</span><span class="p">):</span>
            <span class="n">writer</span><span class="o">.</span><span class="n">writerow</span><span class="p">([</span><span class="n">follower</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">follower</span><span class="o">.</span><span class="n">id_str</span><span class="p">,</span> <span class="n">follower</span><span class="o">.</span><span class="n">created_at</span><span class="p">,</span>
                            <span class="n">follower</span><span class="o">.</span><span class="n">default_profile</span><span class="p">,</span> 
                            <span class="n">follower</span><span class="o">.</span><span class="n">default_profile_image</span><span class="p">,</span> 
                            <span class="n">follower</span><span class="o">.</span><span class="n">description</span><span class="p">,</span> <span class="n">follower</span><span class="o">.</span><span class="n">favourites_count</span><span class="p">,</span>
                            <span class="n">follower</span><span class="o">.</span><span class="n">followers_count</span><span class="p">,</span> <span class="n">follower</span><span class="o">.</span><span class="n">friends_count</span><span class="p">,</span>
                            <span class="n">follower</span><span class="o">.</span><span class="n">geo_enabled</span><span class="p">,</span> <span class="n">follower</span><span class="o">.</span><span class="n">lang</span><span class="p">,</span> 
                            <span class="n">follower</span><span class="o">.</span><span class="n">location</span><span class="p">,</span> <span class="n">follower</span><span class="o">.</span><span class="n">protected</span><span class="p">,</span> 
                            <span class="n">follower</span><span class="o">.</span><span class="n">screen_name</span><span class="p">,</span> <span class="n">follower</span><span class="o">.</span><span class="n">statuses_count</span><span class="p">,</span> 
                            <span class="n">follower</span><span class="o">.</span><span class="n">time_zone</span><span class="p">,</span> <span class="n">follower</span><span class="o">.</span><span class="n">verified</span><span class="p">])</span>
</code></pre></div></div>

<p>For example, <code class="highlighter-rouge">get_followers(user_id=100, num_followers=10, output_file='followers.csv')</code> collects information on 10 followers of the account with the user ID 100 and stores this information in the <code class="highlighter-rouge">followers.csv</code> file.</p>

<p>Next we should have a look at the data we collected for Trump’s Twitter account  to make sure there are no obvious errors that could cause problems for our models later. A convenient way to do this is to load the data into a <a href="https://pandas.pydata.org/pandas-docs/stable/index.html">pandas</a> DataFrame.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">trump_followers_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s">'TrumpFollowers.csv'</span><span class="p">)</span>
<span class="n">trump_followers_df</span><span class="p">[</span><span class="s">'created_at'</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">trump_followers_df</span><span class="p">[</span><span class="s">'created_at'</span><span class="p">])</span>

<span class="n">trump_followers_df</span><span class="o">.</span><span class="n">dtypes</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>name                             object
id                                int64
created_at               datetime64[ns]
default_profile                    bool
default_profile_image              bool
description                      object
favourites_count                  int64
followers_count                   int64
friends_count                     int64
geo_enabled                        bool
lang                             object
location                         object
protected                          bool
screen_name                      object
statuses_count                    int64
time_zone                        object
verified                           bool
dtype: object
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">bool_cols</span> <span class="o">=</span> <span class="n">trump_followers_df</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="n">trump_followers_df</span><span class="o">.</span><span class="n">dtypes</span> <span class="o">==</span> <span class="s">'bool'</span><span class="p">]</span>
<span class="n">trump_followers_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="n">bool_cols</span><span class="p">]</span> <span class="o">=</span> <span class="n">trump_followers_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="n">bool_cols</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
</code></pre></div></div>

<p>Let’s take a look at some summary statistics for some of the numeric columns.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">num_cols</span> <span class="o">=</span> <span class="p">[</span><span class="s">'default_profile'</span><span class="p">,</span> <span class="s">'default_profile_image'</span><span class="p">,</span> <span class="s">'favourites_count'</span><span class="p">,</span> <span class="s">'followers_count'</span><span class="p">,</span> 
            <span class="s">'friends_count'</span><span class="p">,</span> <span class="s">'geo_enabled'</span><span class="p">,</span> <span class="s">'protected'</span><span class="p">,</span> <span class="s">'statuses_count'</span><span class="p">,</span> <span class="s">'verified'</span><span class="p">]</span>
<span class="n">trump_followers_df</span><span class="p">[</span><span class="n">num_cols</span><span class="p">]</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span><span class="o">.</span><span class="nb">round</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</code></pre></div></div>

<p><img src="http://localhost:4000/assets/ss.png" alt="My helpful screenshot" /></p>

 
  
    
<!-- Add Disqus comments. -->
<div id="disqus_thread"></div>
<script type="text/javascript">
  /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
  var disqus_shortname = 'https-reidy-p-github-io'; // required: replace example with your forum shortname
  // var disqus_identifier = "/trump-tweets-part1/";
  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

  
  </article>
</div>


<!-- <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="http://localhost:4000/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="http://localhost:4000/assets/js/scripts.min.js"></script>


  <script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'https-reidy-p-github-io.'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

	         -->

</body>
</html>

    <div class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Follow:</strong></li>
    
    
    
    
      <li><a href="https://github.com/reidy-p"><i class="fa fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
    
    
    
    <!-- <li><a href="http://localhost:4000/feed.xml"><i class="fa fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li> -->
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2017 Paul Reidy. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="http://localhost:4000/assets/js/main.min.js"></script>








  </body>
</html>