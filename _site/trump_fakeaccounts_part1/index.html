<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.7.1 by Michael Rose
  Copyright 2017 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE.txt
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin SEO -->









<title>Estimating Trump’s Fake Twitter Followers: Part 1 - Paul Reidy</title>




<meta name="description" content="Donald Trump enjoys using his Twitter account to “go around” the “Fake News Media” and has amassed a large following on Twitter. But some claim that a large portion of Trump’s Twitter followers are fake. At the time of writing, the twitteraudit service, for example, calculates that 20.8 million of Trump’s 43.8 million followers are fake.">




<meta name="author" content="Paul Reidy">

<meta property="og:locale" content="en">
<meta property="og:site_name" content="Paul Reidy">
<meta property="og:title" content="Estimating Trump’s Fake Twitter Followers: Part 1">


  <link rel="canonical" href="http://localhost:4000/trump_fakeaccounts_part1/">
  <meta property="og:url" content="http://localhost:4000/trump_fakeaccounts_part1/">



  <meta property="og:description" content="Donald Trump enjoys using his Twitter account to “go around” the “Fake News Media” and has amassed a large following on Twitter. But some claim that a large portion of Trump’s Twitter followers are fake. At the time of writing, the twitteraudit service, for example, calculates that 20.8 million of Trump’s 43.8 million followers are fake.">

















  

  





  <meta property="og:type" content="article">
  <meta property="article:published_time" content="2017-12-23T16:45:00+00:00">








  <script type="application/ld+json">
    {
      "@context" : "http://schema.org",
      "@type" : "Person",
      "name" : "Paul Reidy",
      "url" : "http://localhost:4000",
      "sameAs" : null
    }
  </script>







<!-- end SEO -->


<link href="http://localhost:4000/feed.xml" type="application/atom+xml" rel="alternate" title="Paul Reidy Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="http://localhost:4000/assets/css/main.css">

<!--[if lte IE 9]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->


    <!-- start custom head snippets -->

<!-- insert favicons. use http://realfavicongenerator.net/ -->

<!-- end custom head snippets -->
  </head>

  <body class="layout--post">

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    <div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        <a class="site-title" href="http://localhost:4000/">Paul Reidy</a>
        <ul class="visible-links">
          
            
            <li class="masthead__menu-item"><a href="http://localhost:4000/">About</a></li>
          
            
            <li class="masthead__menu-item"><a href="http://localhost:4000/posts/">Posts</a></li>
          
            
            <li class="masthead__menu-item"><a href="http://localhost:4000/software/">Software</a></li>
          
        </ul>
        <button type="button">
          <span class="visually-hidden">Toggle Menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>

    <!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->

<body class="post">
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-110480715-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-110480715-1');
</script>

<div id="main" role="main">
  <article class="post">
    <h2><strong>Estimating Trump's Fake Twitter Followers: Part 1</strong></h2>
    <p><font size="3"><i><time datetime="2017-12-23T16:45:00+00:00">December 23, 2017</time> </i></font></p>
    <hr/>
           
    <p>Donald Trump enjoys using his <a href="https://twitter.com/realDonaldTrump/">Twitter account</a> to <a href="https://twitter.com/realDonaldTrump/status/875690204564258816">“go around”</a> the “Fake News Media” and has amassed a large following on Twitter. But some <a href="https://www.dailydot.com/layer8/trump-fake-twitter-followers-october-2017/">claim</a> that a large portion of Trump’s Twitter followers are fake. At the time of writing, the <a href="https://www.twitteraudit.com/realdonaldtrump">twitteraudit</a> service, for example, calculates that 20.8 million of Trump’s 43.8 million followers are fake.</p>

<p>I thought it would be fun to try to collect some data from Twitter and use some simple machine learning techniques to see if we can come up with our own estimate of how many fake followers Trump has. This is particularly attractive because Twitter’s API is quite friendly to use. In this first post I will collect the data from Twitter using it’s API and the next post will apply the machine learning models to try to estimate the extent of Trump’s fake followers.</p>

<p>I will use the <a href="https://www.tweepy.org">tweepy</a> module to connect to the Twitter API. The first thing we need to do is to <a href="https://apps.twitter.com/">register</a> an app with Twitter to be able to connect to the Twitter API. When you do this you should be able to access your consumer and secret keys which you should keep private. The code below then allows you to gain authorized  access to Twitter’s API. I have replaced my access codes with empty strings and you should insert your codes in here.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># import some modules that we will use</span>
<span class="kn">import</span> <span class="nn">datetime</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">from</span> <span class="nn">tweepy</span> <span class="kn">import</span> <span class="n">OAuthHandler</span><span class="p">,</span> <span class="n">API</span><span class="p">,</span> <span class="n">Cursor</span><span class="p">,</span> <span class="n">RateLimitError</span>
<span class="kn">import</span> <span class="nn">csv</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="n">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="n">np</span>
<span class="kn">import</span> <span class="nn">os.path</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># put your information into these empty strings</span>
<span class="n">consumer_key</span> <span class="o">=</span> <span class="s">''</span>
<span class="n">consumer_secret</span> <span class="o">=</span> <span class="s">''</span> 
<span class="n">access_token</span> <span class="o">=</span> <span class="s">''</span>
<span class="n">access_token_secret</span> <span class="o">=</span> <span class="s">''</span>

<span class="c"># gain authorized access to the Twitter API</span>
<span class="n">auth</span> <span class="o">=</span> <span class="n">OAuthHandler</span><span class="p">(</span><span class="n">consumer_key</span><span class="p">,</span> <span class="n">consumer_secret</span><span class="p">)</span>
<span class="n">auth</span><span class="o">.</span><span class="n">set_access_token</span><span class="p">(</span><span class="n">access_token</span><span class="p">,</span> <span class="n">access_token_secret</span><span class="p">)</span>
<span class="n">myAPI</span> <span class="o">=</span> <span class="n">API</span><span class="p">(</span><span class="n">auth</span><span class="p">)</span>

<span class="c"># get the account ID for Donald Trump's Twitter account</span>
<span class="n">trump_account_id</span> <span class="o">=</span> <span class="n">myAPI</span><span class="o">.</span><span class="n">get_user</span><span class="p">(</span><span class="s">'realDonaldTrump'</span><span class="p">)</span><span class="o">.</span><span class="nb">id</span>
</code></pre></div></div>

<h2 id="trumps-followers-data">Trump’s Followers Data</h2>
<p>The next thing we need is a list of Trump’s followers. To keep the analysis quick and simple I won’t try to collect a list of all of Trump’s 40 million followers but I will instead take a sample and see what we can extrapolate from this. The code below defines some functions which takes the user ID of any (public) Twitter account, collects certain information about <code class="highlighter-rouge">num_followers</code> from that account, and stores this information in a csv file:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">limit_handled</span><span class="p">(</span><span class="n">cursor</span><span class="p">):</span>
    <span class="s">"""A convenient way to handle rate limits with the tweepy Cursor.
    Taken from the tweepy docs."""</span>
    <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">yield</span> <span class="n">cursor</span><span class="o">.</span><span class="nb">next</span><span class="p">()</span>
        <span class="k">except</span> <span class="n">RateLimitError</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="s">'Taking a 15 minute break to avoid rate limit'</span><span class="p">)</span>
            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">15</span> <span class="o">*</span> <span class="mi">60</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">get_account_info</span><span class="p">(</span><span class="n">account</span><span class="p">,</span> <span class="n">api</span><span class="p">,</span> <span class="n">english_only</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
    <span class="s">"""Get information on a Twitter account. This function accepts
    a tweepy User object or an account ID."""</span>

    <span class="c"># Convert an account ID into a user object if necessary</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">account</span><span class="p">,</span> <span class="n">tweepy</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">User</span><span class="p">):</span>
        <span class="n">account</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="n">get_user</span><span class="p">(</span><span class="n">account</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">account</span><span class="o">.</span><span class="n">lang</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s">'en'</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">account</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">account</span><span class="o">.</span><span class="n">id_str</span><span class="p">,</span> <span class="n">account</span><span class="o">.</span><span class="n">created_at</span><span class="p">,</span>
                <span class="n">account</span><span class="o">.</span><span class="n">default_profile</span><span class="p">,</span> <span class="n">account</span><span class="o">.</span><span class="n">default_profile_image</span><span class="p">,</span>
                <span class="n">account</span><span class="o">.</span><span class="n">description</span><span class="p">,</span> <span class="n">account</span><span class="o">.</span><span class="n">favourites_count</span><span class="p">,</span>
                <span class="n">account</span><span class="o">.</span><span class="n">followers_count</span><span class="p">,</span> <span class="n">account</span><span class="o">.</span><span class="n">friends_count</span><span class="p">,</span>
                <span class="n">account</span><span class="o">.</span><span class="n">geo_enabled</span><span class="p">,</span> <span class="n">account</span><span class="o">.</span><span class="n">lang</span><span class="p">,</span>
                <span class="n">account</span><span class="o">.</span><span class="n">location</span><span class="p">,</span> <span class="n">account</span><span class="o">.</span><span class="n">protected</span><span class="p">,</span>
                <span class="n">account</span><span class="o">.</span><span class="n">screen_name</span><span class="p">,</span> <span class="n">account</span><span class="o">.</span><span class="n">statuses_count</span><span class="p">,</span>
                <span class="n">account</span><span class="o">.</span><span class="n">time_zone</span><span class="p">,</span> <span class="n">account</span><span class="o">.</span><span class="n">verified</span><span class="p">]</span>

<span class="k">def</span> <span class="nf">output_followers</span><span class="p">(</span><span class="n">user_id</span><span class="p">,</span> <span class="n">num_followers</span><span class="p">,</span> <span class="n">api</span><span class="p">,</span> <span class="n">output_file</span><span class="o">=</span><span class="s">'followers.csv'</span><span class="p">):</span>
    
    <span class="c"># Create csv file if it doesn't exist</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">output_file</span><span class="p">):</span>    
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">output_file</span><span class="p">,</span> <span class="s">'w'</span><span class="p">,</span> <span class="n">newline</span><span class="o">=</span><span class="s">''</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">writer</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">writer</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="s">','</span><span class="p">)</span>
            <span class="c"># Headings for the csv file</span>
            <span class="n">writer</span><span class="o">.</span><span class="n">writerow</span><span class="p">([</span><span class="s">'name'</span><span class="p">,</span> <span class="s">'id'</span><span class="p">,</span> <span class="s">'created_at'</span><span class="p">,</span> <span class="s">'default_profile'</span><span class="p">,</span>
                            <span class="s">'default_profile_image'</span><span class="p">,</span> <span class="s">'description'</span><span class="p">,</span> 
                            <span class="s">'favourites_count'</span><span class="p">,</span> <span class="s">'followers_count'</span><span class="p">,</span> 
                            <span class="s">'friends_count'</span><span class="p">,</span> <span class="s">'geo_enabled'</span><span class="p">,</span> <span class="s">'lang'</span><span class="p">,</span> <span class="s">'location'</span><span class="p">,</span> 
                            <span class="s">'protected'</span><span class="p">,</span> <span class="s">'screen_name'</span><span class="p">,</span> <span class="s">'statuses_count'</span><span class="p">,</span> 
                            <span class="s">'time_zone'</span><span class="p">,</span> <span class="s">'verified'</span><span class="p">])</span>
    
    <span class="c"># Iterate through the number of followers specified and write follower </span>
    <span class="c"># information to the csv file</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">output_file</span><span class="p">,</span> <span class="s">'a'</span><span class="p">,</span> <span class="n">newline</span><span class="o">=</span><span class="s">''</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">writer</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">writer</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="s">','</span><span class="p">)</span>

        <span class="n">cursor_obj</span> <span class="o">=</span> <span class="n">Cursor</span><span class="p">(</span><span class="n">api</span><span class="o">.</span><span class="n">followers</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="n">user_id</span><span class="p">)</span><span class="o">.</span><span class="n">items</span><span class="p">(</span><span class="n">num_followers</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">count</span><span class="p">,</span> <span class="n">follower</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">limit_handled</span><span class="p">(</span><span class="n">cursor_obj</span><span class="p">)):</span>
            <span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s">'Examining follower {count} out of {num_followers}...'</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">follower</span><span class="o">.</span><span class="n">lang</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s">'en'</span><span class="p">):</span>
                <span class="n">writer</span><span class="o">.</span><span class="n">writerow</span><span class="p">(</span><span class="n">get_account_info</span><span class="p">(</span><span class="n">follower</span><span class="p">,</span> <span class="n">api</span><span class="p">))</span>
</code></pre></div></div>

<p>For example, <code class="highlighter-rouge">output_followers(user_id=100, num_followers=10, output_file='followers.csv')</code> collects information on 10 followers of the account with the user ID 100 and stores this information in the <code class="highlighter-rouge">followers.csv</code> file. One of the benefits of using the <code class="highlighter-rouge">tweepy</code> library is that it provides a <code class="highlighter-rouge">Cursor</code> object which allows us to iterate quite easily through the desired number of followers.</p>

<p>Ideally, we would like to get a random sample of Trump’s followers. This would allow us to use a small, representative sample and try to extrapolate about all of Trump’s followers. However, when we call the <code class="highlighter-rouge">followers</code> method on an instance of the <code class="highlighter-rouge">API</code> class from the <code class="highlighter-rouge">tweepy</code> module, it returns the user’s followers in the order in which they were added. This means that we should be careful about reading too much into our results - I will return to this topic at the end of the next post.</p>

<p>Next we should have a look at the data we collected for Trump’s Twitter account  to make sure there are no obvious errors that could cause problems for our models later. A convenient way to do this is to load the data into a <a href="https://pandas.pydata.org/pandas-docs/stable/index.html">pandas</a> DataFrame:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">trump_followers_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s">'Data/trump_followers/TrumpFollowers_raw.csv'</span><span class="p">)</span>

<span class="c"># Convert created_at to datetime</span>
<span class="n">trump_followers_df</span><span class="p">[</span><span class="s">'created_at'</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">trump_followers_df</span><span class="p">[</span><span class="s">'created_at'</span><span class="p">])</span>

<span class="c"># Remove duplicated rows</span>
<span class="n">trump_followers_df</span> <span class="o">=</span> <span class="n">trump_followers_df</span><span class="o">.</span><span class="n">drop_duplicates</span><span class="p">(</span><span class="n">subset</span><span class="o">=</span><span class="s">'id'</span><span class="p">,</span> <span class="n">keep</span><span class="o">=</span><span class="s">'first'</span><span class="p">)</span>

<span class="c"># Check that all the dtypes make sense</span>
<span class="n">trump_followers_df</span><span class="o">.</span><span class="n">dtypes</span>
</code></pre></div></div>
<p><img src="/assets/trump_fakeaccounts_part1_files/figure1.png" /></p>

<p>Now let’s take a look at some summary statistics for some of the numeric columns.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Convert boolean columns to int</span>
<span class="n">bool_cols</span> <span class="o">=</span> <span class="n">trump_followers_df</span><span class="o">.</span><span class="n">select_dtypes</span><span class="p">(</span><span class="n">include</span><span class="o">=</span><span class="p">[</span><span class="nb">bool</span><span class="p">])</span><span class="o">.</span><span class="n">columns</span>
<span class="n">trump_followers_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="n">bool_cols</span><span class="p">]</span> <span class="o">=</span> <span class="n">trump_followers_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="n">bool_cols</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>

<span class="n">num_cols</span> <span class="o">=</span> <span class="p">[</span><span class="s">'default_profile'</span><span class="p">,</span> <span class="s">'default_profile_image'</span><span class="p">,</span> <span class="s">'favourites_count'</span><span class="p">,</span> <span class="s">'followers_count'</span><span class="p">,</span> 
            <span class="s">'friends_count'</span><span class="p">,</span> <span class="s">'geo_enabled'</span><span class="p">,</span> <span class="s">'protected'</span><span class="p">,</span> <span class="s">'statuses_count'</span><span class="p">,</span> <span class="s">'verified'</span><span class="p">]</span>
<span class="n">trump_followers_df</span><span class="p">[</span><span class="n">num_cols</span><span class="p">]</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span><span class="o">.</span><span class="nb">round</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</code></pre></div></div>

<p><img src="/assets/trump_fakeaccounts_part1_files/figure2.png" /></p>

<p>We can see that we have collected data on 11,702 accounts, excluding the duplicated rows. The summary statistics all seem to be in line with what we might expect. For example, the accounts have posted 175.96 tweets, have 110.12 friends (other accounts that a particular account follows), and 54.01 followers, on average. Interestingly, we can see that 60% of the accounts in the sample have the default profile picture which seems very high and may provide an initial clue that there are many fake accounts in the dataset.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">trump_followers_df</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s">'Data/trump_followers/TrumpFollowers_cleaned.csv'</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
</code></pre></div></div>

<h2 id="training-data">Training Data</h2>
<p>We now have a dataset of accounts that follow Trump on Twitter. But to apply a supervised learning model to this problem we need to get a dataset that is already labelled. That is, we need a dataset where the accounts have already been classified as real or fake. We can then use this data to help the models “learn” how to distinguish between the real and fake accounts in the Trump dataset.</p>

<p>We have several options for getting a training dataset. In some academic papers, for example, a portion of the dataset is classified manually and is used to train the models. <a href="http://www.erinshellman.com/bot-or-not/">Erin Shellman</a>, on the other hand, uses the website <a href="https://www.fiverr.com/">fiverr</a> to purchase fake followers. We could also use services like <a href="https://botometer.iuni.iu.edu/#!/">botometer</a> to try to estimate how likely a particular account is to be fake.</p>

<p>I will use the labelled <a href="https://botometer.iuni.iu.edu/bot-repository/datasets.html">dataset</a> from a paper by <a href="https://arxiv.org/pdf/1703.03107.pdf">Varol et al. (2017)</a>. Let’s take a look at the dataset:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">varol_original_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="s">'Data/varol2017_data/varol2017_original_data.xlsx'</span><span class="p">,</span> 
                                  <span class="n">header</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="s">'account_id'</span><span class="p">,</span> <span class="s">'bot'</span><span class="p">])</span>
<span class="n">varol_original_df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</code></pre></div></div>

<p style="text-align:left;">
<img src="/assets/trump_fakeaccounts_part1_files/figure3.png" width="200" height="100" />
</p>

<p>We can see that the dataset consists of an <code class="highlighter-rouge">account_id</code> variable and a <code class="highlighter-rouge">bot</code> variable where a value of 1 means that the account has been labelled as a fake account and 0 means that it has been labelled as real. However, to use this as a training dataset for classifying the Trump followers we need to get the same features that we collected above so that the models can learn how the different features can distinguish between real and fake accounts. The code below allows us to gather the same features from all of the accounts listed in the Varol et al. dataset.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">varol_original_df</span><span class="o">.</span><span class="n">index</span> <span class="o">=</span> <span class="n">varol_original_df</span><span class="o">.</span><span class="n">index</span> <span class="o">+</span> <span class="mi">1</span> <span class="c"># make the index start from 1</span>

<span class="c"># The script is very time consuming so it will probably take multiple runs of</span>
<span class="c"># the script. Here I check if the file has already been started and how much</span>
<span class="c"># progress made. I then use this to continue where I finished previously.</span>
<span class="n">row_count</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="s">'Data/varol2017_data/varol2017_training_data.csv'</span><span class="p">):</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s">'Data/varol2017_data/varol2017_training_data.csv'</span><span class="p">,</span> <span class="s">'r'</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">row_count</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="mi">1</span> <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">f</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span> <span class="c"># Subtract 1 to avoid counting heading</span>
    <span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s">"Previously stopped at account {row_count} out of {varol_original_df.shape[0]}"</span><span class="p">)</span>

<span class="c"># Create column names if file doesn't already exist</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s">'Data/varol2017_data/varol2017_training_data.csv'</span><span class="p">,</span> <span class="s">'w'</span><span class="p">,</span> <span class="n">newline</span><span class="o">=</span><span class="s">''</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">writer</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">writer</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="s">','</span><span class="p">)</span>
        <span class="n">writer</span><span class="o">.</span><span class="n">writerow</span><span class="p">([</span><span class="s">'bot'</span><span class="p">,</span> <span class="s">'name'</span><span class="p">,</span> <span class="s">'account_id'</span><span class="p">,</span> <span class="s">'created_at'</span><span class="p">,</span> 
                        <span class="s">'default_profile'</span><span class="p">,</span> <span class="s">'default_profile_image'</span><span class="p">,</span> <span class="s">'description'</span><span class="p">,</span> 
                        <span class="s">'favourites_count'</span><span class="p">,</span> <span class="s">'followers_count'</span><span class="p">,</span> <span class="s">'friends_count'</span><span class="p">,</span> 
                        <span class="s">'geo_enabled'</span><span class="p">,</span> <span class="s">'lang'</span><span class="p">,</span> <span class="s">'location'</span><span class="p">,</span> <span class="s">'protected'</span><span class="p">,</span> 
                        <span class="s">'screen_name'</span><span class="p">,</span> <span class="s">'statuses_count'</span><span class="p">,</span> <span class="s">'time_zone'</span><span class="p">,</span> 
                        <span class="s">'verified'</span><span class="p">])</span>

<span class="n">remaining_varol_original_df</span> <span class="o">=</span> <span class="n">varol_original_df</span><span class="p">[</span><span class="n">row_count</span><span class="p">:]</span>

<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s">'Data/varol2017_data/varol2017_training_data.csv'</span><span class="p">,</span> <span class="s">'a'</span><span class="p">,</span> <span class="n">newline</span><span class="o">=</span><span class="s">''</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">writer</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">writer</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="s">','</span><span class="p">)</span>

    <span class="c"># Iterating over the rows of the dataframe. Could this be vectorised?</span>
    <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">remaining_varol_original_df</span><span class="o">.</span><span class="n">itertuples</span><span class="p">():</span>

        <span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s">"Gathering features for account {row.Index} "</span>
              <span class="n">f</span><span class="s">"out of {varol_original_df.shape[0]}..."</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">myAPI</span><span class="o">.</span><span class="n">get_user</span><span class="p">(</span><span class="n">row</span><span class="o">.</span><span class="n">account_id</span><span class="p">)</span><span class="o">.</span><span class="n">lang</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s">'en'</span><span class="p">):</span>
                <span class="n">writer</span><span class="o">.</span><span class="n">writerow</span><span class="p">([</span><span class="n">row</span><span class="o">.</span><span class="n">bot</span><span class="p">]</span> <span class="o">+</span> 
                                <span class="n">get_account_info</span><span class="p">(</span><span class="n">row</span><span class="o">.</span><span class="n">account_id</span><span class="p">,</span> <span class="n">myAPI</span><span class="p">))</span>

        <span class="k">except</span> <span class="n">RateLimitError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="s">'Rate limit exceeded. Waiting for 15 minutes...'</span><span class="p">)</span>
            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">15</span> <span class="o">*</span> <span class="mi">60</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">myAPI</span><span class="o">.</span><span class="n">get_user</span><span class="p">(</span><span class="n">row</span><span class="o">.</span><span class="n">account_id</span><span class="p">)</span><span class="o">.</span><span class="n">lang</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s">'en'</span><span class="p">):</span>
                <span class="n">writer</span><span class="o">.</span><span class="n">writerow</span><span class="p">([</span><span class="n">row</span><span class="o">.</span><span class="n">bot</span><span class="p">]</span> <span class="o">+</span> 
                                <span class="n">get_account_info</span><span class="p">(</span><span class="n">row</span><span class="o">.</span><span class="n">account_id</span><span class="p">,</span> <span class="n">myAPI</span><span class="p">))</span>

        <span class="k">except</span> <span class="n">TweepError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="s">"Failed!"</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">response</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
            <span class="k">print</span><span class="p">()</span>
</code></pre></div></div>

<p>Now let’s take a look at the modified Varol et al. dataset that we are going to use:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">varol_training_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s">'Data/varol2017_data/varol2017_training_data.csv'</span><span class="p">)</span>
<span class="n">varol_training_df</span><span class="p">[</span><span class="s">'created_at'</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">varol_training_df</span><span class="p">[</span><span class="s">'created_at'</span><span class="p">])</span>

<span class="n">varol_training_df</span><span class="o">.</span><span class="n">dtypes</span>
</code></pre></div></div>

<p><img src="/assets/trump_fakeaccounts_part1_files/figure4.png" /></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Convert boolean columns to int (0 or 1)</span>
<span class="n">bool_cols</span> <span class="o">=</span> <span class="n">varol_training_df</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="n">varol_training_df</span><span class="o">.</span><span class="n">dtypes</span> <span class="o">==</span> <span class="s">'bool'</span><span class="p">]</span>
<span class="n">varol_training_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="n">bool_cols</span><span class="p">]</span> <span class="o">=</span> <span class="n">varol_training_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="n">bool_cols</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="s">"There are {} accounts labelled human and {} labelled as "</span>
      <span class="s">"a bot in the Varol et al. (2017) training data."</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">*</span><span class="n">varol_training_df</span><span class="p">[</span><span class="s">'bot'</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()))</span>

<span class="n">num_cols</span> <span class="o">=</span> <span class="p">[</span><span class="s">'default_profile'</span><span class="p">,</span> <span class="s">'default_profile_image'</span><span class="p">,</span> <span class="s">'favourites_count'</span><span class="p">,</span> <span class="s">'followers_count'</span><span class="p">,</span> 
            <span class="s">'friends_count'</span><span class="p">,</span> <span class="s">'geo_enabled'</span><span class="p">,</span> <span class="s">'protected'</span><span class="p">,</span> <span class="s">'statuses_count'</span><span class="p">,</span> <span class="s">'verified'</span><span class="p">]</span>
<span class="n">varol_training_df</span><span class="p">[</span><span class="n">num_cols</span><span class="p">]</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span><span class="o">.</span><span class="nb">round</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</code></pre></div></div>

<p>There are 1632 accounts labelled human and 736 labelled as a bot in the Varol et al. (2017) training data.</p>

<p><img src="/assets/trump_fakeaccounts_part1_files/figure5.png" /></p>

<p>There were 2573 accounts in the original Varol et al. dataset but some of those accounts no longer exist (i.e., they were deleted or suspended) or do not tweet in English so the modified dataset has 2368 items.</p>

<p>Next let’s look at some summary statistics broken down by whether the account is labelled as real or fake:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">num_cols</span> <span class="o">=</span> <span class="p">[</span><span class="s">'bot'</span><span class="p">,</span> <span class="s">'default_profile'</span><span class="p">,</span> <span class="s">'default_profile_image'</span><span class="p">,</span> <span class="s">'favourites_count'</span><span class="p">,</span> <span class="s">'followers_count'</span><span class="p">,</span> 
            <span class="s">'friends_count'</span><span class="p">,</span> <span class="s">'geo_enabled'</span><span class="p">,</span> <span class="s">'protected'</span><span class="p">,</span> <span class="s">'statuses_count'</span><span class="p">,</span> <span class="s">'verified'</span><span class="p">]</span>

<span class="p">(</span><span class="n">varol_training_df</span><span class="p">[</span><span class="n">num_cols</span><span class="p">]</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s">'bot'</span><span class="p">)</span>
                            <span class="o">.</span><span class="n">describe</span><span class="p">()</span>
                            <span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="p">(</span><span class="nb">slice</span><span class="p">(</span><span class="bp">None</span><span class="p">),</span> <span class="p">[</span><span class="s">'mean'</span><span class="p">,</span> <span class="s">'std'</span><span class="p">,</span> <span class="s">'max'</span><span class="p">])]</span>
                            <span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="p">(</span><span class="nb">slice</span><span class="p">(</span><span class="s">'default_profile'</span><span class="p">,</span> <span class="s">'verified'</span><span class="p">),</span> <span class="p">[</span><span class="s">'mean'</span><span class="p">,</span> <span class="s">'std'</span><span class="p">,</span> <span class="s">'max'</span><span class="p">])]</span>
                            <span class="o">.</span><span class="nb">round</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
                            <span class="o">.</span><span class="n">T</span><span class="p">)</span>
</code></pre></div></div>

<p><img src="/assets/trump_fakeaccounts_part1_files/figure6.png" /></p>

<p>As we might expect, the accounts labelled as fake (bot = 1) are more likely to have the default profile settings, the default profile picture, are less likely to be protected, and have more followers and friends, on average. It may surprise us that the fake accounts post fewer statuses, on average, because we usually associate such accounts with generating a lot of spam.</p>

<p>We can also visualise these differences to see if we can get a clearer picture.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="n">sns</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="n">plt</span>
<span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="n">rcParams</span>
<span class="kn">from</span> <span class="nn">matplotlib.ticker</span> <span class="kn">import</span> <span class="n">FuncFormatter</span>
<span class="n">plt</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">use</span><span class="p">(</span><span class="s">'fivethirtyeight'</span><span class="p">)</span>
<span class="o">%</span><span class="n">matplotlib</span> <span class="n">inline</span>
<span class="n">rcParams</span><span class="p">[</span><span class="s">'figure.figsize'</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>

<span class="n">f</span><span class="p">,</span> <span class="p">((</span><span class="n">ax1</span><span class="p">,</span> <span class="n">ax2</span><span class="p">),</span> <span class="p">(</span><span class="n">ax3</span><span class="p">,</span> <span class="n">ax4</span><span class="p">))</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">sns</span><span class="o">.</span><span class="n">barplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="p">[</span><span class="s">'bot = 0'</span><span class="p">,</span> <span class="s">'bot = 1'</span><span class="p">],</span> <span class="n">y</span><span class="o">=</span><span class="n">varol_training_df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s">'bot'</span><span class="p">)[</span><span class="s">'default_profile'</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="o">*</span><span class="mi">100</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax1</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s">'Percentage of Profiles with Default Settings'</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s">'Percent (</span><span class="si">%</span><span class="s">)'</span><span class="p">)</span>
<span class="n">sns</span><span class="o">.</span><span class="n">barplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="p">[</span><span class="s">'bot = 0'</span><span class="p">,</span> <span class="s">'bot = 1'</span><span class="p">],</span> <span class="n">y</span><span class="o">=</span><span class="n">varol_training_df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s">'bot'</span><span class="p">)[</span><span class="s">'default_profile_image'</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="o">*</span><span class="mi">100</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax2</span><span class="p">)</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s">'Percentage of Profiles with Default Image'</span><span class="p">)</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s">'Percent (</span><span class="si">%</span><span class="s">)'</span><span class="p">)</span>
<span class="n">sns</span><span class="o">.</span><span class="n">barplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="p">[</span><span class="s">'bot = 0'</span><span class="p">,</span> <span class="s">'bot = 1'</span><span class="p">],</span> <span class="n">y</span><span class="o">=</span><span class="n">varol_training_df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s">'bot'</span><span class="p">)[</span><span class="s">'verified'</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="o">*</span><span class="mi">100</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax3</span><span class="p">)</span>
<span class="n">ax3</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s">'Percentage of Profiles Verified'</span><span class="p">)</span>
<span class="n">ax3</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s">'Percent (</span><span class="si">%</span><span class="s">)'</span><span class="p">)</span>
<span class="n">sns</span><span class="o">.</span><span class="n">barplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="p">[</span><span class="s">'bot = 0'</span><span class="p">,</span> <span class="s">'bot = 1'</span><span class="p">],</span> <span class="n">y</span><span class="o">=</span><span class="n">varol_training_df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s">'bot'</span><span class="p">)[</span><span class="s">'protected'</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="o">*</span><span class="mi">100</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax4</span><span class="p">)</span>
<span class="n">ax4</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s">'Percentage of Profiles Protected'</span><span class="p">)</span>
<span class="n">ax4</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s">'Percent (</span><span class="si">%</span><span class="s">)'</span><span class="p">);</span>
</code></pre></div></div>

<p><img src="/assets/trump_fakeaccounts_part1_files/trump_fakeaccounts_part1_21_0.png" alt="png" /></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">to_percent</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">position</span><span class="p">):</span>
    <span class="c"># Ignore the passed in position. This has the effect of scaling the default</span>
    <span class="c"># tick locations.</span>
    <span class="n">s</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="mi">100</span> <span class="o">*</span> <span class="n">y</span><span class="p">)</span>

    <span class="c"># The percent symbol needs escaping in latex</span>
    <span class="k">if</span> <span class="n">rcParams</span><span class="p">[</span><span class="s">'text.usetex'</span><span class="p">]</span> <span class="ow">is</span> <span class="bp">True</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">s</span> <span class="o">+</span> <span class="s">r'$\%$'</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">s</span> <span class="o">+</span> <span class="s">'</span><span class="si">%</span><span class="s">'</span>
    
<span class="c"># Create the formatter using the function to_percent. This multiplies all the</span>
<span class="c"># default labels by 100, making them all percentages</span>
<span class="n">formatter</span> <span class="o">=</span> <span class="n">FuncFormatter</span><span class="p">(</span><span class="n">to_percent</span><span class="p">)</span>
    
<span class="c"># Make a normed histogram. It'll be multiplied by 100 later.</span>
<span class="n">f</span><span class="p">,</span> <span class="p">((</span><span class="n">ax1</span><span class="p">,</span> <span class="n">ax2</span><span class="p">),</span> <span class="p">(</span><span class="n">ax3</span><span class="p">,</span> <span class="n">ax4</span><span class="p">),</span> <span class="p">(</span><span class="n">ax5</span><span class="p">,</span> <span class="n">ax6</span><span class="p">))</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">varol_training_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">varol_training_df</span><span class="p">[</span><span class="s">'bot'</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">,</span><span class="s">'friends_count'</span><span class="p">]</span><span class="o">.</span><span class="n">dropna</span><span class="p">(),</span> 
         <span class="nb">range</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">6000</span><span class="p">),</span> <span class="n">color</span><span class="o">=</span><span class="s">'blue'</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">normed</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s">'No. of Friends (Bot = 0)'</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">formatter</span><span class="p">)</span>
                                                                                             
<span class="n">ax2</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">varol_training_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">varol_training_df</span><span class="p">[</span><span class="s">'bot'</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">,</span><span class="s">'friends_count'</span><span class="p">]</span><span class="o">.</span><span class="n">dropna</span><span class="p">(),</span> 
         <span class="nb">range</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">6000</span><span class="p">),</span> <span class="n">color</span><span class="o">=</span><span class="s">'red'</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">normed</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s">'No. of Friends (Bot = 1)'</span><span class="p">)</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">formatter</span><span class="p">)</span>
                                                                                             
<span class="n">ax3</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">varol_training_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">varol_training_df</span><span class="p">[</span><span class="s">'bot'</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">,</span><span class="s">'followers_count'</span><span class="p">]</span><span class="o">.</span><span class="n">dropna</span><span class="p">(),</span> 
         <span class="nb">range</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">6000</span><span class="p">),</span> <span class="n">color</span><span class="o">=</span><span class="s">'blue'</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">normed</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">ax3</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s">'No. of Followers (Bot = 0)'</span><span class="p">)</span>
<span class="n">ax3</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">formatter</span><span class="p">)</span>

<span class="n">ax4</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">varol_training_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">varol_training_df</span><span class="p">[</span><span class="s">'bot'</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">,</span><span class="s">'followers_count'</span><span class="p">]</span><span class="o">.</span><span class="n">dropna</span><span class="p">(),</span> 
         <span class="nb">range</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">6000</span><span class="p">),</span> <span class="n">color</span><span class="o">=</span><span class="s">'red'</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">normed</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">ax4</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s">'No. of Followers (Bot = 1)'</span><span class="p">)</span>
<span class="n">ax4</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">formatter</span><span class="p">)</span>
                                                                                             
<span class="n">ax5</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">varol_training_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">varol_training_df</span><span class="p">[</span><span class="s">'bot'</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">,</span> <span class="s">'statuses_count'</span><span class="p">]</span><span class="o">.</span><span class="n">dropna</span><span class="p">(),</span> <span class="n">color</span><span class="o">=</span><span class="s">'blue'</span><span class="p">,</span> 
         <span class="nb">range</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">30000</span><span class="p">),</span> <span class="n">bins</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">normed</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">ax5</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s">'No. of Tweets (Bot = 0)'</span><span class="p">)</span>
<span class="n">ax5</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">formatter</span><span class="p">)</span>
                                                                                             
<span class="n">ax6</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">varol_training_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">varol_training_df</span><span class="p">[</span><span class="s">'bot'</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">,</span> <span class="s">'statuses_count'</span><span class="p">]</span><span class="o">.</span><span class="n">dropna</span><span class="p">(),</span> <span class="n">color</span><span class="o">=</span><span class="s">'red'</span><span class="p">,</span> 
         <span class="nb">range</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">30000</span><span class="p">),</span> <span class="n">bins</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">normed</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">ax6</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s">'No. of Tweets (Bot = 1)'</span><span class="p">)</span>
<span class="n">ax6</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">formatter</span><span class="p">);</span>
</code></pre></div></div>

<p><img src="/assets/trump_fakeaccounts_part1_files/trump_fakeaccounts_part1_22_0.png" alt="png" /></p>

<p>The histograms don’t reveal any clear differences for the distributions of number of friends, followers, and tweets.</p>

<h1 id="conclusion">Conclusion</h1>
<p>In this post, I collected data on a small sample of Donald Trump’s Twitter followers and also prepared a training dataset. In the next post I will use the training dataset to train and test several models and then classify the Trump followers that we sampled as real or fake.</p>

 
  </article>
</div>


<!-- <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="http://localhost:4000/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="http://localhost:4000/assets/js/scripts.min.js"></script>

	         -->

</body>
</html>

    <div class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Follow:</strong></li>
    
    
    
    
      <li><a href="https://github.com/reidy-p"><i class="fa fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
    
    
    
    <!-- <li><a href="http://localhost:4000/feed.xml"><i class="fa fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li> -->
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2017 Paul Reidy. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="http://localhost:4000/assets/js/main.min.js"></script>








  </body>
</html>